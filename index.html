<!DOCTYPE html>
<html>
<head>
    <title>Ist Heute Plenum?</title>
    <meta charset="utf-8" />
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?1.25.0"></script>		
		<style type="text/css" media="screen">
		h1 {
			text-align: center;
			font-size: 100px;
			font-family: helvetica;
		}
		p {
			text-align: center;
			font-size: 50px;
		}
		</style>
</head>
<body>
	<script type="text/javascript" charset="utf-8">
		var h1 = d3.select("h1")
			.data([plenum()]);
		h1.enter().append("h1")
			.text(function(d) {
					return d ? "jope" : "nope";
			})
			.attr("style", function(d) {
					return d ? "color: #0F0" : "color: #F00";
			});

		var title = d3.select("title").text(plenum() ? "jope" : "nope");

		function plenum()
		{
			var d		= new Date();
			var thursday = new Date( d.getTime() + ( 3 - ( ( d.getDay() + 6 )  % 7)) * 86400000 );
			var weekYear = thursday.getFullYear();

			var thursdayWeekNum =
					new Date(
						new Date( weekYear, 0, 4 ).getTime() +
						( 3 - ( ( new Date( weekYear, 0, 4 ).getDay() + 6 ) % 7) ) * 86400000
					);

			var weekNum = Math.floor( 1.5 + (thursday.getTime() - thursdayWeekNum.getTime()) / 86400000 / 7 );
			return weekNum % 3 == 0 && ( new Date() ).getDay() == 3;
		}
	</script>
</body>
</html>
